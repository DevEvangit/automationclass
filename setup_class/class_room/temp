   - name: Set Fact storagevm_ip_fact
     set_fact:
      exchange01_ip_fact: "{{ storagevm.instance.ipv4 }}"
     loop: "{{ public_ip_facts_exchange01.publicipaddresses }}"
  
  - name: print exchange01 public ip
    debug:
     msg: "{{ exchange01_ip_fact }}"
  
  - name: add exchange01 to ansible host file
    add_host:
      name: "{{ exchange01_ip_fact }}"
      groups: exchange01
      ansible_user: "{{ adminUser }}"
      ansible_password: "{{ adminPassword }}"
      ansible_connection: "winrm"
      ansible_winrm_server_cert_validation: "ignore"
      exchange01_domain_name: "{{ domain_name }}"
      exchange01_adminUser: "{{ adminUser }}"
      exchange01_adminPassword: "{{ adminPassword }}"
      domain_adminUser: "jesbe@exch.arrowdemo.dk"